# Deploy DICOM Cast

In this quickstart, you will learn how to deploy DICOM Cast for your Medical Imaging Server for DICOM. DICOM Cast is a service which pushes Medical Imaging Server for DICOM metadata into a FHIR&trade; server to support integrated queries across clinical and imaging data. To learn more about the architecture of DICOM Cast, refer to the [DICOM Cast Concept](../concepts/dicom-cast.md).

By competing this quickstart, you will have deployed DICOM Cast for your Medical Imaging Server for DICOM. To learn how to sync your Medical Imaging Server for DICOM metadata into a FHIR&trade; server, see [Sync DICOM Metadata to FHIR&trade; with DICOM Cast](../how-to-guides/sync-dicom-metadata-to-fhir.md).

## Deploy via Docker

If you would like to deploy via docker-compose, please follow the quickstart [Deploy Via Docker](deploy-via-docker.md). This will deploy the Medical Imaging Server for DICOM and DICOM Cast.

## Deploy via Azure with Azure Healthcare APIs

DICOM Cast can be deployed as an Azure Container Instance targeting an Azure Healthcare API Workspace with a FHIR Service and a DICOM Service. using the provided [ARM template](/converter/dicom-cast/samples/templates/deploy-with-healthcareapis.json).

> Note: Currently DICOM Cast only supports R4 of FHIR.

### Deployment

If you have an Azure subscription, click the link below to deploy to Azure:

<a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fdicom-server%2Fmain%2Fconverter%2Fdicom-cast%2Fsamples%2Ftemplates%2Fdeploy-with-healthcareapis.json" target="_blank">
    <img src="https://azuredeploy.net/deploybutton.png"/>
</a>

If you do not have an Azure subscription, create a [free account](https://azure.microsoft.com/free) before you begin.

This will deploy the following resources to the specified resource group:

* Azure Container Instance
  + Used to run the DICOM Cast executable
  + The image used is specified via the `image` parameter and defaults to the latest CI build
  + A managed identity is also configured
* Application Insights
  + Used to log events and errors generated by the Medical Imaging Server for DICOM
  + If `deployApplicationInsights` is specified, an Application Insights instance is deployed for logging
* Storage Account
  + Used to keep track of the state of the service
  + Persists information about exceptions in table storage
* KeyVault
  + Used to store the storage connection string
  + Is accessed via the managed identity specified on ACI
* Azure Healthcare APIs Workspace
* R4 FHIR Service
* DICOM Service
* Role assignments of `DICOM Data Owner` and `FHIR Data Contributor` to the ACI managed identity.

Instructions for how to deploy an ARM template can be found in the following docs
* [Deploy via Portal](https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-portal)
* [Deploy via CLI](https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-cli)
* [Deploy via PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-powershell)

## Deploy via Azure with OSS

DICOM Cast can be deployed as an Azure Container Instance using the provided [ARM template](/converter/dicom-cast/samples/templates/default-azuredeploy.json).

### Prerequisites

* A deployed [FHIR Server for Azure](https://github.com/microsoft/fhir-server)
* A deployed [Medical Imaging Server for DICOM](https://github.com/microsoft/dicom-server)

> Note: Currently DICOM Cast is only supported by the Open Source FHIR Server for Azure or the Azure Healthcare APIs FHIR Service, not the Azure API for FHIR. Ensure that the FHIR server is on version R4 of FHIR.

### Deployment

If you have an Azure subscription, click the link below to deploy to Azure:

<a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fdicom-server%2Fmain%2Fconverter%2Fdicom-cast%2Fsamples%2Ftemplates%2Fdefault-azuredeploy.json" target="_blank">
    <img src="https://azuredeploy.net/deploybutton.png"/>
</a>

If you do not have an Azure subscription, create a [free account](https://azure.microsoft.com/free) before you begin.

This will deploy the following resources to the specified resource group:

* Azure Container Instance
  + Used to run the DICOM Cast executable
  + The image used is specified via the `image` parameter and defaults to the latest CI build
  + A managed identity is also configured
* Application Insights
  + Used to log events and errors generated by the Medical Imaging Server for DICOM
  + If `deployApplicationInsights` is specified, an Application Insights instance is deployed for logging
* Storage Account
  + Used to keep track of the state of the service
  + Persists information about exceptions in table storage
* KeyVault
  + Used to store the storage connection string
  + Is accessed via the managed identity specified on ACI

Instructions for how to deploy an ARM template can be found in the following docs
* [Deploy via Portal](https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-portal)
* [Deploy via CLI](https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-cli)
* [Deploy via PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-powershell)

#### Deploy DICOM Server, FHIR Server and DICOM Cast

If you have not yet deployed a DICOM or FHIR Server, you can use use a single ARM Template to deploy the Medical Imaging Server for DICOM, a FHIR OSS Server and a DICOM Cast instance at once. If you do not yet have an Azure subscription, create a [free account](https://azure.microsoft.com/free) before deploying.

For a simplified quick deploy, click the link below to deploy to Azure:

<a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fdicom-server%2Fmain%2Fsamples%2Ftemplates%2Fdicomcast-quick-deploy.json" target="_blank">
  <img src="https://aka.ms/deploytoazurebutton"/>
</a>

> NOTE: this option is ideal to quickly set up DICOM Cast. If you want to customize configuration, you will need to do so after deployment.

If you want to customize all DICOM, FHIR and DICOM Cast settings during deployment, click the link below to deploy to Azure:

<a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fdicom-server%2Fmain%2Fsamples%2Ftemplates%2Fdicomcast-fhir-dicom-azuredeploy.json" target="_blank">
  <img src="https://aka.ms/deploytoazurebutton"/>
</a>

Both of these ARM templates will deploy:

* Medical Imaging Server for DICOM
* [FHIR OSS Server](https://github.com/microsoft/fhir-server)
* DICOM Cast

These three instances will be hosted within the same Resource Group and App Service Plan.

## Summary

In this Quickstart, you will learned how to deploy DICOM Cast for your Medical Imaging Server for DICOM. Reference the [DICOM Cast Concept](../concepts/dicom-cast.md) to learn more. To start using DICOM Cast, see [Sync DICOM Metadata to FHIR&trade; with DICOM Cast](../how-to-guides/sync-dicom-metadata-to-fhir.md).
